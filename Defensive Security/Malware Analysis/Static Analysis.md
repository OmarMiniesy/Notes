### General Notes

When [[Malware]] is analyzed without being executed, this is called *static analysis*.
- The properties of the executable file are analyzed without actually running the file.
- Malware is usually in Portable Executable format, PE. Check [[Portable Executable (PE)]].

Some static analysis techniques include:
- Checking for strings in malware.
- Checking the PE header for information related to different sections.
- Using a disassembler to look at the code.

> A **disassembler** converts the malware's code from binary to assembly so that an analyst can look at the instructions of the malware statically. A **debugger** allows placing break points during the malware execution to view instructions.

To avoid static analysis, malware often use:
- *Obfuscation*: deliberately making code hard to read, understand, or analyze, while keeping the same functionality. This evades signature based detection.
- *Packing*: compressing or encrypting the executable so that the malicious code is not present in plaintext on disk. The malware is restored at runtime in the memory, and run directly.

> This is where [[Dynamic Analysis]] comes in play.

##### Tools

- Dependency Walker
- PeID: used to identify *packed* or *protected* executable files.
- Detect It Easy
- PE Explorer
- PEview
- PE Tree
- ResourceHacker
- IDA Freeware
- WinDbg
- Strings
- [VirusTotal](https://www.virustotal.com/gui/home/upload): Showcases the history, first & last submission, metadata, hashes, behavior, & comments.

---
### Static Analysis Techniques

Determine the file type:
```bash
file <file-name>
```

To list the strings present in a file to understand what the malware does, who it contacts, and so on:
```bash
strings <file-name>
```
- Sometimes the output is too much, so we can redirect to file and view the file.

Determine the file hash. This is a unique identifier for a file that can be used to quickly check if this file was used before or is known malicious:
```bash
md5sum <file-name>
sha256sum <file-name>
```

