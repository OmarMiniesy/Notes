### General Notes

Registers are small storage locations used by the CPU for storage.
- The CPU accesses data from the registers quicker than any other storage medium.

Registers are divided into 4 main types:
- *Instruction Pointer/Program Counter*: Contains the address of the next instruction to be executed by the CPU. For 16 bit processors, it's called the **IP**, and for 32 bit processors it's called the **EIP**, and for 64 bit processors it's called the **RIP**. 
- *General Purpose Registers*: These are general purpose and can hold integers, pointers, and other values.
- *Status Flags Register*: This is a single register that contains many single bit flags that can either be 0 or 1. 
- *Segment Registers*: These are 16 bit registers that divide the memory into logical chunks to facilitate memory access and addressing.

---
#### General Purpose Registers

These are registers that are used for temporary storage for data that is being actively used.
- These registers have different naming conventions based on the bit mode of the system.
	- For 16 bit systems, the registers are `AX, BX, CX, DX, SI, DI, BP, SP`. Explained below.
	- For 32 bit systems, the registers start with `E` for *extended*.
	- For 64 bit systems, the registers start with `R` for *register*.

Moreover, to access certain parts of the registers, sub-registers are used:
- RAX -> all 64 bits of the register.
- EAX -> low 32 bits of RAX
- AX -> low 16 bits of RAX
- AL -> low 8 bits of RAX. Doesn't exist for all registers, only for `AX, BX, CX, DX`
- AH -> high 8 bits of AX. Doesn't exist for all registers, only for `AX, BX, CX, DX`

> In 64 bit mode, writing to `EAX` clears the upper 32 bits of the 64 bit register, `RAX`.

The use of these registers is explained below. Note, these uses are historical and they can change:
- `AX` - **Accumulator Register** : This registers stores the results of arithmetic operations. It is also used as the return value register, or for temporary scratch.
- `BX` - **Base Register** : This register is used as a base pointer to store the base address when using an offset.
- `CX` - **Counter Register** : This register is used in counting operations such as loops.
- `DX` - **Data Register** : This register is used in multiplication and division operations.
- `SP` - **Stack Pointer Register**: This register points to the top of the stack and changes with the operations `push`, `pop`, `call`, `ret`, `sub`, ...
- `BP` - **Base Pointer Register**: This is used to access parameters, local variables, and arguments passed in the stack.
- `RSI/RDI` - **Source/Destination Index Register**: These are used with string operations.

There are also the `R8 - R15` registers which were added in 64 bit systems to provide more registers to be used. The naming convention used:
- `R8` -> all 64 bits
- `R8D` -> lower 32 bits. D for double word.
- `R8W` -> lower 16 bits. W for word.
- `R8B` -> lower 8 bits. B for byte.
#### Status Flags Register

This register is called `EFLAGS` in 32 bit systems and `RFLAGS` in 64 bit systems. The flags it contains:
- `ZF` - **Zero Flag**: This indicates if the result of the last executed instruction was 0. 
- `CF` - **Carry Flag**: This indicates if the last executed instruction resulted in a number too big or too small to store in the destination.
- `SF` - **Sign Flag**: This indicates if the result of an operation is negative or if the most significant bit is set to 1.
- `TF` - **Trap Flag**: This indicates if the processor is in debugging mode. If it is set, the CPU executes one instruction at a time. This is used by *malware* to identify if they are being run in a debugger.
#### Segment Registers

The segment registers used are:
- `CS` - **Code Segment**: Points to the code section in the memory.
- `DS` - **Data Segment**: Points to the program's data section in the memory.
- `SS` - **Stack Segment**: Points to the program's stack in the memory.
- `ES, FS, GS` - **Extra Segments**: These and the `DS` divide the program's memory into 4 sections.

---
